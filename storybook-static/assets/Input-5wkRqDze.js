import{r as i,R as g}from"./index-BCtMShv3.js";import{l as we,a as U,_ as me,p as Ee,f as ve,g as b,e as ge,i as Ne,k as _e}from"./index-c-eVI8SP.js";import{_ as he}from"./CSSMotionList-4Nb43TCA.js";import{u as Re}from"./useMergedState-fwwdJW5A.js";import{o as Fe,u as Ie}from"./useSize-CFdKDM9U.js";import{B as Oe,t as Pe,r as pe,u as $e,a as je}from"./BaseInput-NXqgBssN.js";import{C as Ce}from"./ContextIsolator-B7-X0nQK.js";import{R as Be}from"./CloseCircleFilled-mwelAV6Z.js";import{u as Ae,g as xe,a as ze}from"./useVariants-BMsZE--q.js";import{D as Ke}from"./index-BoN9lWja.js";import{u as De}from"./useCSSVarCls-QMwStWbR.js";import{F as Ve}from"./context-DrZkavia.js";import{u as Te}from"./Compact-Cz_iK0I9.js";var ke=["show"];function Le(e,s){return i.useMemo(function(){var c={};s&&(c.show=we(s)==="object"&&s.formatter?s.formatter:!!s),c=U(U({},c),e);var r=c,n=r.show,d=he(r,ke);return U(U({},d),{},{show:!!n,showFormatter:typeof n=="function"?n:void 0,strategy:d.strategy||function(v){return v.length}})},[e,s])}var Me=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","onKeyUp","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],Ue=i.forwardRef(function(e,s){var c=e.autoComplete,r=e.onChange,n=e.onFocus,d=e.onBlur,v=e.onPressEnter,p=e.onKeyDown,E=e.onKeyUp,j=e.prefixCls,C=j===void 0?"rc-input":j,N=e.disabled,W=e.htmlSize,Y=e.className,Z=e.maxLength,B=e.suffix,H=e.showCount,A=e.count,_=e.type,ee=_===void 0?"text":_,te=e.classes,h=e.classNames,m=e.styles,z=e.onCompositionStart,K=e.onCompositionEnd,ne=he(e,Me),oe=i.useState(!1),D=me(oe,2),ae=D[0],o=D[1],O=i.useRef(!1),x=i.useRef(!1),l=i.useRef(null),P=i.useRef(null),V=function(t){l.current&&Pe(l.current,t)},re=Re(e.defaultValue,{value:e.value}),q=me(re,2),T=q[0],y=q[1],k=T==null?"":String(T),se=i.useState(null),G=me(se,2),w=G[0],le=G[1],f=Le(A,H),R=f.max||Z,F=f.strategy(k),ue=!!R&&F>R;i.useImperativeHandle(s,function(){var a;return{focus:V,blur:function(){var u;(u=l.current)===null||u===void 0||u.blur()},setSelectionRange:function(u,M,$){var I;(I=l.current)===null||I===void 0||I.setSelectionRange(u,M,$)},select:function(){var u;(u=l.current)===null||u===void 0||u.select()},input:l.current,nativeElement:((a=P.current)===null||a===void 0?void 0:a.nativeElement)||l.current}}),i.useEffect(function(){x.current&&(x.current=!1),o(function(a){return a&&N?!1:a})},[N]);var J=function(t,u,M){var $=u;if(!O.current&&f.exceedFormatter&&f.max&&f.strategy(u)>f.max){if($=f.exceedFormatter(u,{max:f.max}),u!==$){var I,de;le([((I=l.current)===null||I===void 0?void 0:I.selectionStart)||0,((de=l.current)===null||de===void 0?void 0:de.selectionEnd)||0])}}else if(M.source==="compositionEnd")return;y($),l.current&&pe(l.current,t,r,$)};i.useEffect(function(){if(w){var a;(a=l.current)===null||a===void 0||a.setSelectionRange.apply(a,Ee(w))}},[w]);var ie=function(t){J(t,t.target.value,{source:"change"})},ce=function(t){O.current=!1,J(t,t.currentTarget.value,{source:"compositionEnd"}),K==null||K(t)},fe=function(t){v&&t.key==="Enter"&&!x.current&&(x.current=!0,v(t)),p==null||p(t)},Q=function(t){t.key==="Enter"&&(x.current=!1),E==null||E(t)},X=function(t){o(!0),n==null||n(t)},S=function(t){x.current&&(x.current=!1),o(!1),d==null||d(t)},L=function(t){y(""),V(),l.current&&pe(l.current,t,r)},ye=ue&&"".concat(C,"-out-of-range"),Se=function(){var t=Fe(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames","onClear"]);return g.createElement("input",ve({autoComplete:c},t,{onChange:ie,onFocus:X,onBlur:S,onKeyDown:fe,onKeyUp:Q,className:b(C,ge({},"".concat(C,"-disabled"),N),h==null?void 0:h.input),style:m==null?void 0:m.input,ref:l,size:W,type:ee,onCompositionStart:function(M){O.current=!0,z==null||z(M)},onCompositionEnd:ce}))},be=function(){var t=Number(R)>0;if(B||f.show){var u=f.showFormatter?f.showFormatter({value:k,count:F,maxLength:R}):"".concat(F).concat(t?" / ".concat(R):"");return g.createElement(g.Fragment,null,f.show&&g.createElement("span",{className:b("".concat(C,"-show-count-suffix"),ge({},"".concat(C,"-show-count-has-suffix"),!!B),h==null?void 0:h.count),style:U({},m==null?void 0:m.count)},u),B)}return null};return g.createElement(Oe,ve({},ne,{prefixCls:C,className:b(Y,ye),handleReset:L,value:k,focused:ae,triggerFocus:V,suffix:be(),disabled:N,classes:te,classNames:h,styles:m}),Se())});const We=e=>{let s;return typeof e=="object"&&(e!=null&&e.clearIcon)?s=e:e&&(s={clearIcon:g.createElement(Be,null)}),s};function He(e,s){const c=i.useRef([]),r=()=>{c.current.push(setTimeout(()=>{var n,d,v,p;!((n=e.current)===null||n===void 0)&&n.input&&((d=e.current)===null||d===void 0?void 0:d.input.getAttribute("type"))==="password"&&(!((v=e.current)===null||v===void 0)&&v.input.hasAttribute("value"))&&((p=e.current)===null||p===void 0||p.input.removeAttribute("value"))}))};return i.useEffect(()=>(s&&r(),()=>c.current.forEach(n=>{n&&clearTimeout(n)})),[]),r}function qe(e){return!!(e.prefix||e.suffix||e.allowClear||e.showCount)}var Ge=function(e,s){var c={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&s.indexOf(r)<0&&(c[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)s.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(c[r[n]]=e[r[n]]);return c};const ut=i.forwardRef((e,s)=>{const{prefixCls:c,bordered:r=!0,status:n,size:d,disabled:v,onBlur:p,onFocus:E,suffix:j,allowClear:C,addonAfter:N,addonBefore:W,className:Y,style:Z,styles:B,rootClassName:H,onChange:A,classNames:_,variant:ee}=e,te=Ge(e,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant"]),{getPrefixCls:h,direction:m,allowClear:z,autoComplete:K,className:ne,style:oe,classNames:D,styles:ae}=Ne("input"),o=h("input",c),O=i.useRef(null),x=De(o),[l,P,V]=$e(o,H),[re]=je(o,x),{compactSize:q,compactItemClassnames:T}=Te(o,m),y=Ie(S=>{var L;return(L=d??q)!==null&&L!==void 0?L:S}),k=g.useContext(Ke),se=v??k,{status:G,hasFeedback:w,feedbackIcon:le}=i.useContext(Ve),f=ze(G,n),R=qe(e)||!!w;i.useRef(R);const F=He(O,!0),ue=S=>{F(),p==null||p(S)},J=S=>{F(),E==null||E(S)},ie=S=>{F(),A==null||A(S)},ce=(w||j)&&g.createElement(g.Fragment,null,j,w&&le),fe=We(C??z),[Q,X]=Ae("input",ee,r);return l(re(g.createElement(Ue,Object.assign({ref:_e(s,O),prefixCls:o,autoComplete:K},te,{disabled:se,onBlur:ue,onFocus:J,style:Object.assign(Object.assign({},oe),Z),styles:Object.assign(Object.assign({},ae),B),suffix:ce,allowClear:fe,className:b(Y,H,V,x,T,ne),onChange:ie,addonBefore:W&&g.createElement(Ce,{form:!0,space:!0},W),addonAfter:N&&g.createElement(Ce,{form:!0,space:!0},N),classNames:Object.assign(Object.assign(Object.assign({},_),D),{input:b({[`${o}-sm`]:y==="small",[`${o}-lg`]:y==="large",[`${o}-rtl`]:m==="rtl"},_==null?void 0:_.input,D.input,P),variant:b({[`${o}-${Q}`]:X},xe(o,f)),affixWrapper:b({[`${o}-affix-wrapper-sm`]:y==="small",[`${o}-affix-wrapper-lg`]:y==="large",[`${o}-affix-wrapper-rtl`]:m==="rtl"},P),wrapper:b({[`${o}-group-rtl`]:m==="rtl"},P),groupWrapper:b({[`${o}-group-wrapper-sm`]:y==="small",[`${o}-group-wrapper-lg`]:y==="large",[`${o}-group-wrapper-rtl`]:m==="rtl",[`${o}-group-wrapper-${Q}`]:X},xe(`${o}-group-wrapper`,f,w),P)})}))))});export{ut as I,Le as a,We as g,He as u};
